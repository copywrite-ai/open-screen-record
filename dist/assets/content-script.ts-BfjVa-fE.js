var o=Object.defineProperty;var a=(i,e,t)=>e in i?o(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var s=(i,e,t)=>a(i,typeof e!="symbol"?e+"":e,t);class d{constructor(){s(this,"events",[]);s(this,"isRecording",!1);s(this,"startTime",0);s(this,"handleMouseMove",e=>{if(!this.isRecording)return;const t=Date.now()-this.startTime;this.events.push({x:e.clientX,y:e.clientY,timestamp:t,type:"move"})});s(this,"handleClick",e=>{if(!this.isRecording)return;const t=Date.now()-this.startTime;this.events.push({x:e.clientX,y:e.clientY,timestamp:t,type:"click"})})}start(){this.isRecording=!0,this.events=[],this.startTime=Date.now(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("click",this.handleClick),console.log("Metadata recorder started")}async stop(){return this.isRecording=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("click",this.handleClick),console.log("Metadata recorder stopped",this.events),this.events}getEvents(){return this.events}}const n=new d;typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((i,e,t)=>{if(i.type==="GET_DIMENSIONS")t({width:window.innerWidth,height:window.innerHeight,dpr:window.devicePixelRatio});else if(i.type==="START_RECORDING")n.start(),t({status:"started"});else if(i.type==="STOP_RECORDING")return n.stop().then(r=>{t({status:"stopped",data:r})}),!0});export{d as MetadataRecorder};
