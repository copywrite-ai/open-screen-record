var o=Object.defineProperty;var a=(s,e,t)=>e in s?o(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>a(s,typeof e!="symbol"?e+"":e,t);class d{constructor(){i(this,"events",[]);i(this,"isRecording",!1);i(this,"startTime",0);i(this,"handleMouseMove",e=>{if(!this.isRecording)return;const t=Date.now()-this.startTime;this.events.push({x:e.clientX,y:e.clientY,timestamp:t,type:"move"})});i(this,"handleClick",e=>{if(!this.isRecording)return;const t=Date.now()-this.startTime;this.events.push({x:e.clientX,y:e.clientY,timestamp:t,type:"click"})})}start(){this.isRecording=!0,this.events=[],this.startTime=Date.now(),window.addEventListener("mousemove",this.handleMouseMove),window.addEventListener("click",this.handleClick),console.log("Metadata recorder started")}async stop(){return this.isRecording=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("click",this.handleClick),console.log("Metadata recorder stopped",this.events),this.events}getEvents(){return this.events}}const n=new d;typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((s,e,t)=>{if(s.type==="START_RECORDING")n.start(),t({status:"started"});else if(s.type==="STOP_RECORDING")return n.stop().then(r=>{t({status:"stopped",data:r})}),!0});export{d as MetadataRecorder};
